{% extends "base.html" %} <!-- загрузка повторяемых элементов из родительсткого шаблона -->
{% load static %}  <!-- подгружать статики нужно на каждой странице независимо есть ли эта команда в родительском шаблоне -->
{% block content %} <!-- начало уникального контента для данной страницы-->
<a class="post-a flex">
  <div class="post-user-img-box">
      <object>
          <a href="{% url 'user-posts' post.author.username %}">
              <img src="{{ post.author.profile.image.url }}" alt="img" > 
          </a>
      </object>
  </div>
  <div class="post-text-box">
    <object>
          <a class="user-name" href="{% url 'user-posts' post.author.username %}"> {{post.author}} </a>
    </object>
    <object>
        <a class="post-title" href="{% url 'usertouser:create_message' recipient=post.author.username %}" title="sms"> Message me </a>
    </object>
    <object>
          <a class="post-title" href="{% url 'post-detail' post.id %}"> {{ post.title }} </a>
    </object>
    <p> {{post.animaltype}} is {{post.animalstatus}} in {{post.date_posted|date:"d F - Y (H:i)"}} </p> <!--формат даты - день, месяц, год, время-->
    <p> {{ post.description}} </p>
  </div>
  <div class="post-animal-img-box">
    <object>
        <a href="{{ post.animal_image.url }}">
            <img src="{{ post.animal_image.url }}" alt="img">
        </a>
        <br></br>
    </object>
  </div>
</a>
<h3>Comments  |
{% if user.is_authenticated %}
<a href="{% url 'add_comment' post.pk %}">  Add comment</a>
{% else %}
Log in to be able to add comments
{% endif %}
</h3>
{% if not post.comments.all %}
<h3>No comments yet! Be the first one!</h3>
{% else %}
{% for comments in post.comments.all %}
<a class="post-a flex">
<div class="post-user-img-box">
    <object>
        <a href="{% url 'user-posts' comments.comment_author %}">
            <img src="{{ comments.comment_author.profile.image.url }}" alt="img" >
        </a>
    </object>
</div> 
        {{ comments.comment_author }}'s comment at {{ comments.date_added|date:"d F - Y (H:i)" }}
</br>
        {{ comments.body }}
</br></br></br>
</a>
{% endfor %}
{% endif %}
<div class="pagination wrapper">
{% if is_paginated %} <!--начало логики для пагинации-->
    {% if page_obj.has_previous %}
    <P class="blocktext"><a href="?page=1">First page</a></P>
    <P class="blocktext previous-page"><a href="?page={{ page_obj.previous }}">Previous page</a></P>
    {% endif %}
  
    {% for num in page_obj.paginator.page_range %}
      {% if page_obj.number == num %}
      <P class="blocktext"><a href="?page={{ num }}">{{ num }}</a></P>
      {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
      <P class="blocktext"><a href="?page={{ num }}">{{ num }}</a></P>
      {% endif %}
    {% endfor %}
  
    {% if page_obj.has_next %}
    <P class="blocktext next-page"><a href="?page={{ page_obj.next_page_number }}">Next page</a></P>
    <P class="blocktext"><a href="?page={{ page_obj.paginator.num_pages }}">Last page</a></P>
    {% endif %}
{% endif %}
</div>
{% if object.author == user %}
<a href="{% url 'post-update' post.id %}">Update Post |</a>
<a href="{% url 'post-delete' post.id %}">Delete Post |</a>
{% endif %}
{% endblock content %} <!-- конец уникального контента для данной страницы -->